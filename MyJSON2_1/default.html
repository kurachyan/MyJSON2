<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <title>MyJSON2_1</title>

    <!-- WinJS 参照 -->
    <link href="//Microsoft.WinJS.2.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.2.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.2.0/js/ui.js"></script>

    <!-- MyJSON2_1 参照 -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>

    <script src="/js/localscript.js"></script>
    <script src="/js/LocalTimerscript.js"></script>
    <script src="/js/LocalJSONscript.js"></script>

    <script src="/js/Function.js"></script>
<!---
    <script src="/js/Variable.js"></script>
    <script src="/js/Dictionary.js"></script>
//--->
    <!-- Script （前処理）-->
    <script>
/*
                var data = {
                    mz: 700,
                    pc: 6001,
                    text: "Retro PC",
                    today: new Date()
                }
                var jsondata;
*/
        var test1 = function () {
            let a1 = 0;
        }
        var b1 = [0, 1, 2, 3, 4, 5];
    </script>
</head>
<body>
    <!---
        <p>コンテンツをここに挿入</p>
    //--->

    <p>ＭｙＪＳＯＮ２＿１</p>

    <!--- Header --->
    <form name="myTime">
        <div id="timeinfo">登録時間を表示します。</div>
    </form>

    <!--- Body --->
    <!--- 詳細情報 --->
    <form name="myForm">
        <div id="result">詳細情報を表示します。</div>
    </form>

    <!--- Footer --->
    <form name="myFooter">
        <div id="footinfo">待機中です。</div><br>
        <input type="button" name="Boot" value="開始"
               onclick="BootJob()">
        <input type="button" name="Exit" value="終了"
               onclick="ExitJob()">
        <br>
        <input type="button" name="Encode" value="生成"
               onclick="EncJob()">
<!---
        <input type="button" name="Decode" value="復号"
               onclick="DecJob()">
//--->
    </form>

    <script>
        let local = new LocalTimerScript();         // Local Timer Script Module
        let json = new LocalJSONScript();           // Local JSON Script Module
        let func = new LocalFunctionScript();       // Local Function Script Module
/*
        let dic = new LocalDictionaryScript();      // Local Dictionary Script Module
        let vari = new LocalVariableScript();       // Local Variable Script Module
        let sds = new SubDictionaryScript();        // Sub Dictionary Script Module
*/
        function BootJob() {
            // 処理開始
            if (local.CheckTimer() == false) {      // タイマー未稼働？
                // タイマー稼働
                local.BootTimer();
                document.getElementById("footinfo").innerHTML = "Timer稼働中です。";

            } else {
                // 稼働済み
                //                document.getElementById("footinfo").innerHTML = "二重稼働は出来ません。";
                // 処理終了
                local.StopTimer();
                document.getElementById("footinfo").innerHTML = "待機中です。";
            }
        }
        function ExitJob() {
            // 処理終了
            local.StopTimer();
            document.getElementById("footinfo").innerHTML = "待機中です。";
        }

        function EncJob() {
            func.Start();
            let wpos = func.Add("test1", test1);
/*
                    dic.Start();
                    /
                                func.Start();

                                // DictionaryにModule設定
                                let wpos = func.Add("test1", test1);
                                wpos = dic.dSetMod(func.Get(wpos));
                    /
                    // DictionaryにVariable設定
                    let wpos = vari.vAdd("b1", b1);
                    wpos = dic.dSetVal(vari.Get(wpos));

                    // JSON生成
                    json.Start();

                    if (json.Check()) {         // JSON動作可能？
                        // document.getElementById("footinfo").innerHTML = "JSON動作可能です。";
                        let work = json.Encode(dic.GetTable());
                        document.getElementById("footinfo").innerHTML = "生成 ： " + work;
                    } else {
                        document.getElementById("footinfo").innerHTML = "JSON動作不可能です。";
                    }

                    json.Clear();
                    json.End();

                    dic.End();
*/
        }
        /*
                function DecJob() {
                    /
                                // JSON復号
                                if (json.Check()) {         // JSON動作可能？
                                    json.Decode();
                    //                document.getElementById("footinfo").innerHTML = "JSON復号完了です。";
                                    let work = json.ReEncode();
                    //                document.getElementById("result").innerHTML = "\"today\" : " + json.GetValue(json.SearchKey("today"));
                                    document.getElementById("result").innerHTML = "再生成：" + work;

                                    json.Clear();
                                    json.End();
                                }
                    /
                }
        */
    </script>
</body>
</html>
